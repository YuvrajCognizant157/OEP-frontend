<div class="exam-list-container">
  <h2 class="page-title">My Exams</h2>
  @if(exams.length !=0){
  <div class="exam-cards-grid">
    @for(exam of exams; track exam.eid) {
    <mat-card class="exam-card">
      <mat-card-header>
        <mat-card-title>{{ exam.name }}</mat-card-title>
        <mat-card-subtitle>{{ exam.description }}</mat-card-subtitle>
        <mat-card-subtitle [ngClass]="getApprovalStatus(exam.approvalStatus, exam.submittedForApproval).class">
            {{ getApprovalStatus(exam.approvalStatus, exam.submittedForApproval).text }}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="card-content" (click)="viewExamDetails(exam.eid)">
        <mat-divider></mat-divider>
        <div class="exam-details">
          <div class="detail-item">
            <mat-icon>help_outline</mat-icon>
            <span>{{ exam.totalQuestions }} Questions</span>
          </div>
          <div class="detail-item">
            <mat-icon>check_circle_outline</mat-icon>
            <span>{{ exam.totalMarks }} Marks</span>
          </div>
          <div class="detail-item">
            <mat-icon>timer</mat-icon>
            <span>{{ exam.duration }} mins</span>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions class="card-actions">
        <button
          mat-flat-button
          class="update-button"
          [disabled]="exam.approvalStatus === -1"
          (click)="onUpdateExam(exam.eid)"
        >
          <mat-icon>edit</mat-icon>
          Update
        </button>
        @if (exam.approvalStatus === 0 && !exam.submittedForApproval) {
        <button
          mat-flat-button
          color="primary"
          (click)="sendExamForApproval(exam.eid)"
          aria-label="Send exam for approval"
        >
          <mat-icon>send</mat-icon>
          Get Approval
        </button>
        }
        <button
          mat-flat-button
          color="warn"
          [disabled]="exam.approvalStatus === -1"
          (click)="onDeleteExam(exam.eid)"
        >
          <mat-icon>delete</mat-icon>
          Delete
        </button>
      </mat-card-actions>
    </mat-card>
    }
  </div>
  }@else {
  <div class="detail-item else-case">
    <p style="color: antiquewhite !important">No Exams Created..</p>
  </div>
  }
</div>

<!-- Modals remain the same -->
<app-exam-modal
  [exam]="selectedExam"
  [isOpen]="isModalOpen"
  (closeModal)="closeModal()"
></app-exam-modal>
<app-update-exam-modal
  [examData]="examToUpdate()"
  [isOpen]="isUpdateModalOpen()"
  (closeModal)="closeUpdateModal()"
  (examUpdated)="onExamUpdated()"
>
</app-update-exam-modal>