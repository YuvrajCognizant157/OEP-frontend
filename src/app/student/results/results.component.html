<!-- Main Component View -->
<div class="results-page-container">
  <h2>Exams</h2>
  @if (results.length > 0) {
  <div class="exam-grid">
    @for (result of results; track result.eid) {
    <mat-card class="exam-card">
      <mat-card-header>
        <mat-card-title>{{ result.examName }}</mat-card-title>
        <mat-card-subtitle> Total Marks: {{ result.totalMarks }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="viewResult(result.eid)">
          View Result
        </button>
      </mat-card-actions>
    </mat-card>
    }
  </div>

  } @else {
  <p class="empty-state-message">No exams are available at the moment.</p>
  }
</div>

<ng-template #resultDialog>
  <h2 mat-dialog-title>Exam Result</h2>
  <mat-dialog-content class="dialog-content-area">
    @if (isLoading) {
    <div class="dialog-loader">
      <mat-spinner diameter="50"></mat-spinner>
      <p>Loading result...</p>
    </div>
    } @else if (resultData() && resultData().length! > 0) { @for (result of resultData(); track
    result.attempts) {
    <div class="result-row">
      <span
        >Attempt No: <strong>{{ result.attempts }}</strong></span
      >
      <span class="score-display"
        >Score: <strong>{{ result.score || 0}}</strong></span
      >
    </div>
    } } @else {
    <p>No result data was found for this exam.</p>
    }
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-flat-button color="warn" [mat-dialog-close]="true">Close</button>
  </mat-dialog-actions>
</ng-template>

